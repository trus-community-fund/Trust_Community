<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#002366"> <!-- Royal Blue Theme -->
    <title>Trust Community Fund</title>
    
    <!-- Speed Optimization -->
    <link rel="preload" href="user-style.css" as="style">
    <link rel="preload" href="https://ik.imagekit.io/kdtvm0r78/1764742107098.png" as="image">
    
    <link rel="manifest" href="/manifest-user.json">
    
    <!-- NEW LOGO -->
    <link rel="shortcut icon" href="https://ik.imagekit.io/kdtvm0r78/IMG-20251202-WA0000.jpg" type="image/x-icon">
    <link rel="apple-touch-icon" href="https://ik.imagekit.io/kdtvm0r78/IMG-20251202-WA0000.jpg" sizes="180x180">
    
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Firebase Libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <link rel="stylesheet" href="user-style.css">
</head>
<body>

    <header class="animate-on-scroll">
        <div id="headerDisplay" class="header-display">
            <div class="ad-content"></div>
            <div class="ticker-wrap">
                <div class="ticker" id="newsTicker">Welcome to Trust Community Fund... Your trusted financial partner...</div>
            </div>
        </div>
        <h1>Trust Community Fund</h1>
        <h4>ESTD: 23 June 2024</h4>
        <div class="header-actions" id="headerActionsContainer">
            <p class="loading-text" style="color: white;">Loading Actions...</p>
        </div>
        
        <div id="install-button-container" class="header-actions" style="padding-top: 0;"></div>

    </header>
     
    <main class="content-wrapper">
        <section class="bank-members animate-on-scroll"> 
            <div class="header-container"> 
                <h2 class="bank-headline">COMMUNITY MEMBERS</h2> 
                <div class="header-buttons-wrapper" id="staticHeaderButtons">
                </div>
            </div> 
            <div class="member-slider" id="memberContainer"> <p class="loading-text">Authenticating...</p> </div> 
        </section> 

        <section class="action-cards-section animate-on-scroll"> 
            <h2>Quick Actions</h2> 
            <div class="action-cards"> 
                <!-- FIRST CARD IMAGE (GOLD COIN) -->
                <div class="action-card info-card animate-on-scroll" id="totalMembersCard" style="cursor: pointer;">
                    <img src="https://ik.imagekit.io/kdtvm0r78/IMG-20251202-WA0000.jpg" class="action-card-icon-img" alt="TCF Coin" style="width: 55px; height: 55px; margin-bottom: 8px;">
                    <span class="info-card-label">All members</span>
                    <span class="info-card-value" id="totalMembersValue">--</span>
                </div> 
                
                <div class="action-card info-card animate-on-scroll" id="totalLoanCard" onclick="window.open('loan_dashbord.html')" style="cursor: pointer;">
                    <i data-feather="trending-up" class="action-card-icon"></i>
                    <span class="info-card-label">All time loan<br><small style="color: var(--primary-color); font-weight: bold; font-size: 0.9em;">Click here</small></span>
                    <span class="info-card-value total-loan-value" id="totalLoanValue">‚Çπ--</span>
                </div> 
                <a href="members.html" class="action-card animate-on-scroll"><i data-feather="list" class="action-card-icon"></i><span>All members info</span></a> 
                
                <!-- WHATSAPP CARD (UPDATED TO GREEN GRADIENT VIA CSS) -->
                <a href="https://wa.me/917903698180" target="_blank" class="action-card whatsapp-card animate-on-scroll">
                    <img src="https://www.svgrepo.com/show/452133/whatsapp.svg" alt="WhatsApp Icon" class="action-card-icon-img">
                    <span>Whatsapp Support</span>
                </a> 
                
                <a href="loan_form.html" class="action-card animate-on-scroll"><i data-feather="file-text" class="action-card-icon"></i><span>Loan form</span></a> 
                
                <a href="Jarvis.html" class="action-card animate-on-scroll"><i data-feather="cpu" class="action-card-icon"></i><span>Jarvis Ai</span></a>
                <a href="gallery.html" class="action-card animate-on-scroll"><i data-feather="image" class="action-card-icon"></i><span>Gallery</span></a>
                <a href="calculator.html" class="action-card animate-on-scroll"><i data-feather="percent" class="action-card-icon"></i><span>Loan Calculator</span></a>
            </div> 
        </section>
        
        <section class="products-section animate-on-scroll">
            <h2>Products on EMI</h2>
            <div class="products-container" id="productsContainer">
                <p class="loading-text">Loading Products...</p>
            </div>
        </section>

        <section class="info-slider-section animate-on-scroll"> <h2>üí° Community Info</h2> <div class="info-slider-container" id="infoSlider"> </div> </section> 
        <section class="letter-slider-section animate-on-scroll"> <h2><i data-feather="image"></i> About Community Letter</h2> <div class="slider-container"> <div class="slides" id="communityLetterSlides"></div> <button class="prev" id="prevSlideBtn">‚ùÆ</button> <button class="next" id="nextSlideBtn">‚ùØ</button> </div> <div class="slide-indicator" id="slideIndicator"></div> </section> 
    </main>

    <footer>
        <p>¬© <span id="currentYear"></span> Trust Community Fund. All rights reserved. <a href="Exit_Letter.html" style="color: #a0aec0; text-decoration: none; font-size: 0.8em; opacity: 0.7;" title="Exit Community Letter">Exit</a></p>
    </footer>

    <!-- LUXURY BALANCE MODAL -->
    <div id="balanceModal" class="modal">
        <div class="modal-content luxury-modal">
            <span class="close" id="closeBalanceModal">√ó</span>
            <h2 class="luxury-title">Community Funds</h2>
            
            <div class="balance-group">
                <p class="balance-label">Total SIP Amount</p>
                <div id="totalSipAmountDisplay" class="balance-value green-text">‚Çπ0</div>
            </div>

            <div class="balance-group">
                <p class="balance-label">Total Current Loan Amount</p>
                <div id="totalCurrentLoanDisplay" class="balance-value red-text">‚Çπ0</div>
            </div>

            <div class="balance-group">
                <p class="balance-label">Net Return Amount (After 10% Deduction)</p>
                <div id="netReturnAmountDisplay" class="balance-value gold-text-value">‚Çπ0</div>
            </div>

            <hr class="luxury-divider">

            <div class="balance-group total-group">
                <p class="balance-label total-label">Available Community Balance</p>
                <div id="availableAmountDisplay" class="balance-value green-text large-text">‚Çπ0</div>
            </div>
        </div>
    </div>
    
    <!-- LUXURY PENALTY WALLET MODAL (UPDATED) -->
    <div id="penaltyWalletModal" class="modal">
        <div class="modal-content luxury-modal">
            <span class="close" id="closePenaltyWalletModal">√ó</span>
            <h2 class="luxury-title">PENALTY WALLET</h2>
            
            <div class="balance-group total-group">
                <div id="penaltyBalance" class="balance-value red-text large-text">‚Çπ0</div>
                <p class="balance-label">Current Penalty Balance</p>
            </div>

            <hr class="luxury-divider">
            
            <button id="viewHistoryBtn" class="civil-button" style="margin-bottom: 20px; width: 100%; border-radius: 8px;">View History</button>
            <ul class="penalty-history-list" id="penaltyHistoryList" style="display: none;"></ul>
        </div>
    </div>

    <div id="memberProfileModal" class="modal"> 
        <div class="modal-content"> 
            <span class="close" id="closeProfileModal">√ó</span> 
            <div class="profile-modal-header" id="profileModalHeader"><img id="profileModalImage" src="" alt="Profile Picture"></div> 
            <div class="profile-modal-prime-tag" id="profileModalPrimeTag">üëë Prime</div> 
            <h2 id="profileModalName">Member Name</h2> 
            <ul class="profile-stats-list"> 
                <li><span class="stat-label"><i data-feather="calendar"></i> Joining Date</span><span id="profileModalJoiningDate" class="stat-value">--</span></li> 
                <li><span class="stat-label"><i data-feather="dollar-sign"></i> Current Balance</span><span id="profileModalBalance" class="stat-value positive">‚Çπ0</span></li> 
                <li><span class="stat-label"><i data-feather="trending-up"></i>Loan Return Pay</span><span id="profileModalReturn" class="stat-value info">‚Çπ0</span></li> 
                <li><span class="stat-label"><i data-feather="check-circle"></i> This Month SIP</span><span id="profileModalSipStatus" class="stat-value">--</span></li> 
                <li><span class="stat-label"><i data-feather="hash"></i> Loan Count</span><span id="profileModalLoanCount" class="stat-value">0</span></li> 
            </ul> 
            <button id="fullViewBtn" style="width: 100%; padding: 12px; margin-top: 20px; background-color: var(--primary-color); color: white; border: none; border-radius: 8px; font-size: 1.1em; cursor: pointer;">Full View</button> 
        </div> 
    </div> 
    
    <div id="sipStatusModal" class="modal"> 
        <div class="modal-content"> 
            <span class="close" id="closeSipStatusModal">√ó</span> 
            <h2>Current Month SIP Status</h2> 
            <div class="sip-status-list" id="sipStatusListContainer"></div> 
        </div> 
    </div> 

    <div id="allMembersModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeAllMembersModal">√ó</span>
            <h2>All Community Members</h2>
            <div class="all-members-list" id="allMembersListContainer"></div>
        </div>
    </div>

    <div id="passwordPromptModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closePasswordModal">√ó</span>
            <h2>Enter Password</h2>
            <p style="margin-bottom: 20px; font-size: 0.9em; color: var(--light-text);">Please enter the member's password to view full details.</p>
            <input type="password" id="passwordInput" placeholder="Password" style="width: 100%; padding: 12px; font-size: 1.1em; border: 1px solid var(--border-color); border-radius: 8px; margin-bottom: 20px; box-sizing: border-box;">
            <button id="submitPasswordBtn" style="width: 100%; padding: 12px; background-color: var(--success-color); color: white; border: none; border-radius: 8px; font-size: 1.1em; cursor: pointer;">Submit</button>
        </div>
    </div>

    <div id="fullProfileViewModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeFullProfileModal">√ó</span>
            <h2 id="fullProfileName">Member Full Details</h2>
            <div class="full-profile-body">
                <div class="full-profile-grid">
                    <div class="full-profile-item"><strong>Membership ID</strong><span id="fullProfileMemberId">--</span></div>
                    <div class="full-profile-item"><strong>Mobile Number</strong><span id="fullProfileMobile">--</span></div>
                    <div class="full-profile-item"><strong>Date of Birth</strong><span id="fullProfileDob">--</span></div>
                    <div class="full-profile-item"><strong>Aadhaar No.</strong><span id="fullProfileAadhaar">--</span></div>
                    <div class="full-profile-item" style="grid-column: 1 / -1;"><strong>Address</strong><span id="fullProfileAddress">--</span></div>
                    <div class="full-profile-item" style="background: #e6f7ff;"><strong>Extra Amount</strong><span id="fullProfileExtraAmount" style="font-weight: bold; color: var(--info-color);">--</span></div>
                </div>
                <div class="full-profile-images">
                    <div><strong>Profile Photo</strong><img id="fullProfilePic" src="" alt="Profile Photo"></div>
                    <div><strong>Document</strong><img id="fullProfileDoc" src="" alt="Document"></div>
                    <div><strong>Signature</strong><img id="fullProfileSign" src="" alt="Signature"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="imageModal" class="modal image-modal-overlay"> 
    <span class="close" id="closeImageModal">√ó</span> 
    <img class="image-modal-content" id="fullImageSrc" alt="Full Size Image"> 
</div>

    
    <div id="deviceVerificationModal" class="modal">
        <div class="modal-content">
        </div>
    </div>

    <div id="emiModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeEmiModal">√ó</span>
            <h2 id="emiModalTitle">EMI Details</h2>
            <ul class="emi-details-list" id="emiDetailsList">
            </ul>
        </div>
    </div>
    
    <div id="notification-popup-container"></div>

    <!-- FIXED SCRIPT LOADING: Pointing to user-main.js as module -->
    <script type="module" src="user-main.js"></script>

</body>
</html>

